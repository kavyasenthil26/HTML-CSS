<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registration Form</title>
    <link rel="stylesheet" href="validationform.css">
</head>
<body>
    <div class="container">
        <form action="" id="form">
            <h1>Registration Form</h1>
                 <div class="input-group">
                    <label for="username">Username</label>
                    <input type="text" id="username" name="username">
                    <div class="msg"></div>
                 </div>
                 <div class="input-group">
                    <label for="email">Email</label>
                    <input type="text" name="email" id="email">
                    <div class="msg"></div>
                 </div>
                 <div class="input-group">
                    <label for="password">Password</label>
                    <input type="password" name="password" id="password">
                    <div class="msg"></div>
                 </div>
                 <div class="input-group">
                    <label for="cpassword">confirm Password</label>
                    <input type="password" name="confrim-password" id="cpassword">
                    <div class="msg"></div>
                 </div>
                 <button type="submit">Register</button>
        </form>
    </div>
</body>
<script>
   const username = document.querySelector("#username");
const email = document.querySelector("#email");
const password = document.querySelector("#password");
const cpassword = document.querySelector("#cpassword");
const form = document.querySelector("#form");
form.addEventListener('submit',(e)=>{
    if(!validateInput()){
        e.preventDefault();
    }
})
function validateInput(){
    const usernameval = username.value.trim();
    const emailval = email.value.trim();
    const passwordval = password.value.trim();
    const cpasswordval = cpassword.value.trim();
    let success = true;
    if(usernameval===""){
        success = false;
        setmsg(username,"Username is required");
    }
    else{
        setsuccess(username)
    }
    if(emailval===""){
        success = false;
        setmsg(email,"Email is required");
    }
    else if(!validateEmail(emailval)){
        success = false;
        setmsg(email,"Please enter a Valid Email address");
    }
    else{
        setsuccess(email)
    }
    if(passwordval===""){
        success = false;
        setmsg(password,"Password is reqired");
    }
    //else if(passwordval.length<8){
    //  success = false;
    //  setmsg(password,"Password must be atleast 8 characters")
    //}
    else if(!validatePassword(password)){
        success = false;
        setmsg(password,"1 UpperCase,1 LowerCase,1 digit,1 symbol");
    }
    else{
        setsuccess(password)
    }
    if(cpasswordval===""){
        success = false;
        setmsg(cpassword,"Confirm password is required");
    }
    else if(cpasswordval!==passwordval){
        success = false;
        setmsg(cpassword,"Password does not match")
    }
    else{
        setsuccess(cpassword);
    }
    return success;
}
function setmsg(element,message){
    const inputgroup = element.parentElement;
    const msgElement = inputgroup.querySelector('.msg')

    msgElement.innerText = message;
    inputgroup.classList.add('msg');
    inputgroup.classList.remove('success');
}
function setsuccess(element){
    const inputgroup = element.parentElement;
    const msgElement = inputgroup.querySelector('.msg')

    msgElement.innerText = '';
    inputgroup.classList.add('success');
    inputgroup.classList.remove('msg');
}
const validateEmail = (email) =>{
    return String(email).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/);
}

const validatePassword = (password)=>{
    return /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*]).{8,20}$/.test(password);
}

</script>
</html>
